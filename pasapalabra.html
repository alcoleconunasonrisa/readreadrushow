<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasapalabra Andaluc√≠a - Primaria</title>
    <style>
        :root { --verde: #00843D; --blanco: #ffffff; --dorado: #C1A14E; --rojo: #d32f2f; --azul: #004521; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: radial-gradient(circle, #005e2c, #002b14); color: white; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .main-wrapper { display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 40px; margin-top: 20px; width: 95%; max-width: 1200px; }
        .rosco-container { position: relative; width: 520px; height: 520px; flex-shrink: 0; }
        .letra { position: absolute; width: 40px; height: 40px; background: var(--azul); border: 2px solid white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.1rem; transition: all 0.3s; }
        .letra.activa { transform: scale(1.3); border-color: var(--dorado); box-shadow: 0 0 20px var(--dorado); z-index: 5; }
        .acierto { background-color: var(--verde) !important; }
        .error { background-color: var(--rojo) !important; }
        .timer { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 3.5rem; color: var(--dorado); font-weight: bold; }
        .panel { background: white; color: #333; padding: 25px; border-radius: 20px; width: 380px; border-left: 8px solid var(--dorado); }
        input { width: 100%; padding: 15px; font-size: 1.3rem; border: 2px solid var(--verde); border-radius: 10px; text-align: center; text-transform: uppercase; outline: none; box-sizing: border-box; }
        .botones { display: flex; gap: 10px; margin-top: 15px; }
        button { flex: 1; padding: 12px; font-weight: bold; border-radius: 8px; cursor: pointer; border: none; color: white; }
        .btn-ok { background: var(--verde); } .btn-pass { background: var(--dorado); }
    </style>
</head>
<body>
<a href="main-index.html" style="
    position: fixed;
    top: 20px;
    left: 20px;
    background-color: #00843D;
    color: white;
    padding: 10px 15px;
    text-decoration: none;
    border-radius: 8px;
    font-family: sans-serif;
    font-weight: bold;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 8px;
">
   üè† Volver al inicio
</a>
    <h1>PASAPALABRA ANDALUC√çA</h1>
    <div class="main-wrapper">
        <div class="rosco-container" id="rosco"><div class="timer" id="reloj">720</div></div>
        <div class="panel">
            <h2 id="letra-h" style="color:var(--verde); margin:0">Letra A</h2>
            <p id="def" style="font-size: 1.1rem; min-height: 80px;">Cargando...</p>
            <input type="text" id="ans" placeholder="Escribe con tildes..." autocomplete="off">
            <div class="botones">
                <button class="btn-ok" onclick="check()">ENVIAR</button>
                <button class="btn-pass" onclick="pass()">PASAPALABRA</button>
            </div>
        </div>
    </div>

    <audio id="s-ok" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="s-no" src="https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3"></audio>

    <script>
        const datos = [
            {l:"A", p:"ALMER√çA", d:"Provincia andaluza donde se encuentra el Cabo de Gata."},
            {l:"B", p:"BOQUER√ìN", d:"Pescado peque√±o que se come frito, muy t√≠pico en M√°laga."},
            {l:"C", p:"C√ÅDIZ", d:"Ciudad andaluza rodeada de mar, famosa por sus Carnavales."},
            {l:"D", p:"DO√ëANA", d:"Parque Nacional muy importante donde vive el lince ib√©rico."},
            {l:"E", p:"ESTRECHO", d:"Franja de mar que separa Andaluc√≠a de √Åfrica."},
            {l:"F", p:"FLAMENCO", d:"Baile y m√∫sica tradicional de nuestra tierra."},
            {l:"G", p:"GRANADA", d:"Ciudad donde puedes visitar los palacios de la Alhambra."},
            {l:"H", p:"HUELVA", d:"Provincia famosa por sus fresas y el descubrimiento de Am√©rica."},
            {l:"I", p:"INVERNADERO", d:"Construcci√≥n de pl√°stico para cultivar tomates en Almer√≠a."},
            {l:"J", p:"JA√âN", d:"Capital del aceite de oliva y tierra de muchos olivos."},
            {l:"K", p:"KIL√ìMETRO", d:"Unidad de medida de distancia entre dos ciudades."},
            {l:"L", p:"LINCE", d:"Animal salvaje protegido que vive en Do√±ana."},
            {l:"M", p:"MEZQUITA", d:"Famoso monumento de C√≥rdoba de construcci√≥n √°rabe con arcos rojos y blancos."},
            {l:"N", p:"NEVADA", d:"Lugar de Granada donde se puede esquiar: Sierra..."},
            {l:"√ë", p:"CA√ëA", d:"Contiene la √ë: Se usa para pinchar las sardinas en el espeto."},
            {l:"O", p:"OLIVO", d:"√Årbol que nos da las aceitunas."},
            {l:"P", p:"PUENTE", d:"Construcci√≥n como la del Carranza, La Pepa o el Tajo de Ronda por donde pasa una corriente de agua."},
            {l:"Q", p:"QUESO", d:"Alimento que se hace mucho en la Sierra de Grazalema."},
            {l:"R", p:"ROMER√çA", d:"Fiesta popular donde se va en carreta o caballo a una ermita."},
            {l:"S", p:"SEVILLA", d:"Capital de Andaluc√≠a, donde est√° la Giralda."},
            {l:"T", p:"TARIFA", d:"Pueblo de C√°diz con mucho viento y muy cerca de √Åfrica."},
            {l:"U", p:"√öBEDA", d:"Ciudad de Ja√©n famosa por su historia y sus edificios antiguos."},
            {l:"V", p:"VERDE", d:"Uno de los colores de nuestra bandera."},
            {l:"W", p:"WESTERN", d:"Contiene la W: Pel√≠culas de vaqueros grabadas en Almer√≠a."},
            {l:"X", p:"XEREZ", d:"Contiene la X: Nombre antiguo de Jerez de la Frontera."},
            {l:"Y", p:"AYAMONTE", d:"Contiene la Y: Pueblo de Huelva que limita con Portugal y est√° a las orillas del Guadiana."},
            {l:"Z", p:"ZAHARA", d:" Primer nombre de estos pueblos: ... de los atunes y ... de la sierra."}
        ];

        let i = 0, t = 720;
        let estados = Array(datos.length).fill(null); // null = pendiente, 1 = acierto, 0 = error
        let finalizado = false;

        function init() {
            const r = document.getElementById('rosco');
            datos.forEach((d, idx) => {
                const div = document.createElement('div');
                div.className = 'letra'; div.id = 'l'+idx; div.innerText = d.l;
                const a = (idx * (360/datos.length) - 90) * (Math.PI/180);
                div.style.left = (240 + 220 * Math.cos(a)) + 'px';
                div.style.top = (240 + 220 * Math.sin(a)) + 'px';
                r.appendChild(div);
            });
            update();
        }

        function siguientePendiente() {
            let count = 0;
            while (count < datos.length) {
                i = (i + 1) % datos.length;
                if (estados[i] === null) return true;
                count++;
            }
            return false;
        }

        function update() {
            if (estados.every(e => e !== null) || t <= 0) {
                finalizado = true;
                document.getElementById('letra-h').innerText = "FIN";
                document.getElementById('def').innerText = "Has completado el rosco. ¬°Revisa tus resultados!";
                document.getElementById('ans').style.display = "none";
                document.querySelector('.botones').style.display = "none";
                return;
            }
            
            document.querySelectorAll('.letra').forEach(x => x.classList.remove('activa'));
            document.getElementById('l'+i).classList.add('activa');
            document.getElementById('letra-h').innerText = "Con la " + datos[i].l;
            document.getElementById('def').innerText = datos[i].d;
        }

        function check() {
            if (finalizado) return;
            const val = document.getElementById('ans').value.trim().toUpperCase();
            const res = datos[i].p.toUpperCase();
            
            if(val === res) { 
                document.getElementById('l'+i).classList.add('acierto'); 
                document.getElementById('s-ok').play();
                estados[i] = 1;
            } else { 
                document.getElementById('l'+i).classList.add('error'); 
                document.getElementById('s-no').play();
                estados[i] = 0;
            }
            
            document.getElementById('ans').value = "";
            siguientePendiente();
            update();
        }

        function pass() {
            if (finalizado) return;
            siguientePendiente();
            update();
        }

        setInterval(() => { 
            if(t > 0 && !finalizado){ 
                t--; 
                document.getElementById('reloj').innerText = t; 
                if(t <= 0) update();
            } 
        }, 1000);

        document.getElementById('ans').addEventListener("keyup", (e) => { if(e.key === "Enter") check(); });
        init();
    </script>
</body>
</html>
